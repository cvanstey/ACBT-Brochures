<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Atlantic City Board of Trade Summary</title>
<style>
  /* Same styling as before for a nice table */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 2rem;
    background: #f9f9f9;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 2rem;
    color: #004080;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    background: white;
  }
  thead {
    background: #004080;
    color: white;
  }
  th, td {
    padding: 12px 15px;
    border: 1px solid #ddd;
    text-align: left;
    vertical-align: top;
  }
  tbody tr:nth-child(even) {
    background-color: #f1f7ff;
  }
  tbody tr:hover {
    background-color: #cce0ff;
  }
  @media (max-width: 600px) {
    table, thead, tbody, th, td, tr {
      display: block;
    }
    thead tr {
      display: none;
    }
    tbody tr {
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      padding: 0.5rem;
      background: white;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    tbody td {
      padding-left: 50%;
      position: relative;
      text-align: right;
      border: none;
      border-bottom: 1px solid #eee;
    }
    tbody td::before {
      content: attr(data-label);
      position: absolute;
      left: 15px;
      width: 45%;
      padding-left: 10px;
      font-weight: bold;
      text-align: left;
      color: #004080;
      white-space: normal;
    }
  }
</style>
</head>
<body>

<h1>Atlantic City Board of Trade Summary</h1>

<div id="table-container">Loading data...</div>

<!-- PapaParse CDN -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<script>
  function buildTable(data) {
    if (!data.length) {
      document.getElementById('table-container').innerHTML = '<p>No data found.</p>';
      return;
    }

    // Build table elements
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const tbody = document.createElement('tbody');

    // Create header row
    const headerRow = document.createElement('tr');
    Object.keys(data[0]).forEach(headerText => {
      const th = document.createElement('th');
      th.textContent = headerText;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);

    // Create data rows
    data.forEach(row => {
      const tr = document.createElement('tr');
      Object.entries(row).forEach(([key, value]) => {
        const td = document.createElement('td');
        td.setAttribute('data-label', key);
        td.textContent = value;
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });

    table.appendChild(thead);
    table.appendChild(tbody);

    // Replace container content
    const container = document.getElementById('table-container');
    container.innerHTML = '';
    container.appendChild(table);
  }

  // Load CSV file dynamically
  Papa.parse('data/Atlantic_City_Board_of_Trade_Summary.csv', {
    download: true,
    header: true,
    complete: function(results) {
      buildTable(results.data);
    },
    error: function(err) {
      document.getElementById('table-container').innerHTML = '<p>Error loading CSV data.</p>';
      console.error(err);
    }
  });
</script>

</body>
</html>
